@startuml
rectangle "Frontend" as frontend{
[Android] as Android
}

rectangle location {
[Geocoder]
[Geolocation]
}

cloud {
rectangle "API" as backend {

    node "Docker network" {
        node "Nginx Container" as nginx{
            port 80 as HTTP
            port 443 as HTTPS
            rectangle {
                control "Reverse Proxy" as reverse_proxy
            }
        }
        frame "Backend Container" as database{
            port 3306 as mysql
            database "quran"
        }
        frame "Middle Tier Container" as api{
            port 8000 as nimaz_api_port
            [Spring Boot API] as Nimaz_API
        }
    }
  }
}

cloud {
'firebase analytics, crashlytics, etc
    rectangle "Firebase" as firebase{
        [Firebase Analytics]
        [Firebase Crashlytics]
    }
}
   nginx -[hidden]-> api
    nginx -[hidden]-> database
    frontend -[hidden]-> nginx
    location -[hidden]> frontend
    firebase -[hidden]> frontend
' external ports
    mysql -left-(3306
    HTTP -up-(80
    HTTPS -up-(443


    Android -down-> 80
    Android <-down-> 443
    Android <-right-> firebase
    Android <-up-> location

    reverse_proxy <-down-> nimaz_api_port

    Nimaz_API <-down-> mysql
@enduml